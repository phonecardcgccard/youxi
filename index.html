<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>记忆力小游戏</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Tailwind CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
    </style>
</head>
<body>
    <section class="py-16">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8" id="games">
                <!-- Letter Memory Game -->
                <div class="game-card bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition">
                    <div class="h-48 bg-gradient-to-r from-purple-500 to-purple-600 flex items-center justify-center">
                        <span class="text-white text-6xl font-bold">A B C</span>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-3 text-gray-800">字母记忆</h3>
                        <p class="text-gray-600 mb-4">挑战你的记忆力，记住英文字母的顺序，非常适合语言学习者！</p>
                        <button onclick="startGame('letter')" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-2 rounded-lg font-medium transition flex items-center justify-center">
                            开始游戏 <i class="fas fa-play ml-2"></i>
                        </button>
                    </div>
                </div>
                <!-- Chinese Character Memory Game -->
                <div class="game-card bg-white rounded-xl overflow-hidden shadow-lg hover:shadow-xl transition">
                    <div class="h-48 bg-gradient-to-r from-green-500 to-green-600 flex items-center justify-center">
                        <span class="text-white text-6xl font-bold">水 火 山</span>
                    </div>
                    <div class="p-6">
                        <h3 class="text-xl font-bold mb-3 text-gray-800">汉字记忆</h3>
                        <p class="text-gray-600 mb-4">用汉字挑战你的视觉记忆，非常适合中文学习者和记忆爱好者。</p>
                        <button onclick="startGame('chinese')" class="w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg font-medium transition flex items-center justify-center">
                            开始游戏 <i class="fas fa-play ml-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Game Area (Hidden by default) -->
    <section id="game-area" class="py-16 bg-gray-50 hidden">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center mb-8">
                <h2 id="game-title" class="text-2xl md:text-3xl font-bold text-gray-800"></h2>
                <div class="flex items-center space-x-4">
                    <span id="level-display" class="bg-gray-200 px-4 py-2 rounded-lg font-medium">关卡: 1</span>
                    <span id="score-display" class="bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-medium">得分: 0</span>
                </div>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-6 mb-8">
                <div id="game-instructions" class="mb-6 p-4 bg-blue-50 rounded-lg"></div>
                <div id="game-sequence" class="text-center text-4xl font-bold mb-6"></div>
                <div id="game-input" class="flex flex-wrap gap-2 justify-center mb-6"></div>
                <button id="next-round" class="hidden bg-blue-600 hover:bg-blue-700 text-white py-2 px-6 rounded-lg font-medium transition">下一关</button>
                <button id="back-to-menu" class="hidden bg-gray-400 hover:bg-gray-500 text-white py-2 px-6 rounded-lg font-medium transition mt-4">返回菜单</button>
            </div>
        </div>
    </section>

    <script>
        // 当前游戏状态
        let currentGame = null;
        let currentLevel = 1;
        let currentScore = 0;
        let currentSequence = [];
        let userInput = [];

        // 游戏配置
        const gameConfigs = {
            letter: {
                title: "字母记忆挑战",
                instructions: "请记住显示的英文字母顺序，然后按顺序点击输入。每一关字母数量会增加。",
                generateSequence: function(level) {
                    const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                    const sequence = [];
                    for (let i = 0; i < level + 2; i++) {
                        sequence.push(letters[Math.floor(Math.random() * letters.length)]);
                    }
                    return sequence;
                },
                displayItem: function(item) {
                    return item;
                },
                inputOptions: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('')
            },
            chinese: {
                title: "汉字记忆挑战",
                instructions: "请记住显示的汉字顺序，然后按顺序点击输入。每一关汉字数量会增加。",
                generateSequence: function(level) {
                    const characters = ['水', '火', '山', '木', '田', '日', '月', '金', '土', '风', '雨', '云', '石', '竹', '花', '草', '鱼', '鸟', '马', '牛'];
                    const sequence = [];
                    for (let i = 0; i < level + 1; i++) {
                        const randomIndex = Math.floor(Math.random() * characters.length);
                        sequence.push(characters[randomIndex]);
                    }
                    return sequence;
                },
                displayItem: function(item) {
                    return item;
                },
                inputOptions: ['水', '火', '山', '木', '田', '日', '月', '金', '土', '风', '雨', '云', '石', '竹', '花', '草', '鱼', '鸟', '马', '牛']
            }
        };

        // 开始游戏
        function startGame(gameType) {
            currentGame = gameType;
            currentLevel = 1;
            currentScore = 0;
            document.getElementById('games').classList.add('hidden');
            document.getElementById('game-area').classList.remove('hidden');
            document.getElementById('game-title').textContent = gameConfigs[gameType].title;
            document.getElementById('level-display').textContent = `关卡: ${currentLevel}`;
            document.getElementById('score-display').textContent = `得分: ${currentScore}`;
            document.getElementById('game-instructions').textContent = gameConfigs[gameType].instructions;
            document.getElementById('back-to-menu').classList.add('hidden');
            startRound();
        }

        // 开始一轮
        function startRound() {
            userInput = [];
            document.getElementById('next-round').classList.add('hidden');
            document.getElementById('back-to-menu').classList.add('hidden');
            document.getElementById('level-display').textContent = `关卡: ${currentLevel}`;
            document.getElementById('score-display').textContent = `得分: ${currentScore}`;
            document.getElementById('game-sequence').className = "text-center text-4xl font-bold mb-6";
            // 生成序列
            currentSequence = gameConfigs[currentGame].generateSequence(currentLevel);
            // 显示序列
            showSequence(0);
        }

        // 依次显示序列
        function showSequence(index) {
            const sequenceDiv = document.getElementById('game-sequence');
            const inputDiv = document.getElementById('game-input');
            inputDiv.innerHTML = '';
            if (index < currentSequence.length) {
                sequenceDiv.textContent = gameConfigs[currentGame].displayItem(currentSequence[index]);
                setTimeout(() => {
                    sequenceDiv.textContent = '';
                    setTimeout(() => showSequence(index + 1), 400);
                }, 800);
            } else {
                // 显示输入选项
                showInputOptions();
            }
        }

        // 显示输入按钮
        function showInputOptions() {
            const inputDiv = document.getElementById('game-input');
            inputDiv.innerHTML = '';
            gameConfigs[currentGame].inputOptions.forEach(option => {
                const btn = document.createElement('button');
                btn.textContent = option;
                btn.className = "bg-gray-200 hover:bg-gray-300 text-xl px-4 py-2 rounded-lg font-bold transition";
                btn.onclick = () => handleUserInput(option);
                inputDiv.appendChild(btn);
            });
        }

        // 处理用户输入
        function handleUserInput(option) {
            userInput.push(option);
            if (userInput.length === currentSequence.length) {
                checkAnswer();
            }
        }

        // 检查答案
        function checkAnswer() {
            const isCorrect = userInput.every((val, idx) => val === currentSequence[idx]);
            const sequenceDiv = document.getElementById('game-sequence');
            if (isCorrect) {
                currentScore += currentLevel * 10;
                currentLevel++;
                sequenceDiv.textContent = "答对了！";
                sequenceDiv.className = "text-center text-4xl font-bold mb-6 text-green-500";
                document.getElementById('next-round').classList.remove('hidden');
            } else {
                sequenceDiv.textContent = "答错了，游戏结束！";
                sequenceDiv.className = "text-center text-4xl font-bold mb-6 text-red-500";
                document.getElementById('back-to-menu').classList.remove('hidden');
            }
            document.getElementById('score-display').textContent = `得分: ${currentScore}`;
        }

        // 下一关
        document.getElementById('next-round').addEventListener('click', startRound);

        // 返回菜单
        document.getElementById('back-to-menu').addEventListener('click', function() {
            document.getElementById('game-area').classList.add('hidden');
            document.getElementById('games').classList.remove('hidden');
        });
    </script>
</body>
</html>
